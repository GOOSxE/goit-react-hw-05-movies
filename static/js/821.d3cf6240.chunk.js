"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[821],{821:function(e,t,r){r.r(t),r.d(t,{default:function(){return g}});var n=r(861),a=r(439),i=r(757),c=r.n(i),s=r(791),o=r(87),u=r(689),l={search_page:"SearchMoviesPage_search_page__axvvT",title:"SearchMoviesPage_title__ql8E2",films_list:"SearchMoviesPage_films_list__jY1Zd",item:"SearchMoviesPage_item__dKpXJ",film_img:"SearchMoviesPage_film_img__2n0B8"},h={method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJkNWZhZGQ2ZTM1NzZhYzczYTI5YTBiZGQzY2QxODg0YyIsInN1YiI6IjY0YjI2NWJmMjNkMjc4MDEyNjE5ZTA0MSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.3G83-ZE9yN2ZrJDadqJ_dUGn7iM-UGUP6UdVEl0aij0"}},f=function(){var e=(0,n.Z)(c().mark((function e(t){var r,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.themoviedb.org/3/search/movie?query=".concat(t),h);case 2:return r=e.sent,e.next=5,r.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=f,m="SearchBar_search_form__JD4pT",d="SearchBar_button__T7RTc",_="SearchBar_input__bIy50",v=r(184),x=function(e){var t=e.onFormSubmit,r=(0,s.useState)(""),n=(0,a.Z)(r,2),i=n[0],c=n[1];return(0,v.jsxs)("form",{className:m,onSubmit:function(e){e.preventDefault(),t(i),c("")},children:[(0,v.jsx)("input",{className:_,onChange:function(e){c(e.target.value.trim())},value:i,type:"text",autocomplete:"off",autofocus:!0,placeholder:"Search films...",required:!0,minLength:1}),(0,v.jsx)("button",{className:d,type:"submit",children:(0,v.jsx)("span",{children:"Search"})})]})},g=function(){var e=(0,o.lr)(),t=(0,a.Z)(e,2),r=t[0],i=t[1],h=(0,u.TH)(),f=(0,s.useState)(r.get("query")||null),m=(0,a.Z)(f,2),d=m[0],_=m[1],g=(0,s.useState)(null),j=(0,a.Z)(g,2),b=j[0],Z=j[1],N=(0,s.useState)(!1),S=(0,a.Z)(N,2),y=S[0],k=S[1],w=(0,s.useState)(null),J=(0,a.Z)(w,2),I=J[0],M=J[1];return(0,s.useEffect)((function(){var e=function(){var e=(0,n.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==d){e.next=2;break}return e.abrupt("return");case 2:if(""!==d){e.next=7;break}return alert("\u041f\u043e\u043b\u0435 \u043f\u043e\u0448\u0443\u043a\u0443 \u043d\u0435 \u043c\u043e\u0436\u0435 \u0431\u0443\u0442\u0438 \u043f\u0443\u0441\u0442\u0438\u043c!"),e.abrupt("return");case 7:return k(!0),e.prev=8,e.next=11,p(d);case 11:if(0!==(t=e.sent).results.length){e.next=16;break}throw new Error("No films found!");case 16:Z(t.results);case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(8),M(e.t0),console.log(e.t0);case 23:return e.prev=23,k(!1),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[8,19,23,26]])})));return function(){return e.apply(this,arguments)}}();e()}),[d]),(0,v.jsxs)("div",{className:l.search_page,children:[(0,v.jsx)("h2",{className:l.title,children:"Movies Page"}),(0,v.jsx)(x,{onFormSubmit:function(e){d!==e?(_(e),""===e&&null===e||i({query:e}),Z([]),M(null)):d===e&&alert("\u041d\u0435 \u043c\u043e\u0436\u043d\u0430 \u0432\u0432\u043e\u0434\u0438\u0442\u0438 \u043e\u0434\u043d\u0435 \u0439 \u0442\u0435 \u0441\u0430\u043c\u0435!")}}),y&&(0,v.jsx)("p",{children:"Loading content..."}),I?(0,v.jsx)("p",{children:I.message}):!y&&(null===b||void 0===b?void 0:b.length)>0&&(0,v.jsx)("ul",{className:l.films_list,children:b.map((function(e){return(0,v.jsxs)(o.rU,{className:l.item,state:{from:h},to:"/movies/".concat(e.id),children:[(0,v.jsx)("img",{className:l.film_img,src:e.backdrop_path?"https://www.themoviedb.org/t/p/original/".concat(e.backdrop_path):"https://ireland.apollo.olxcdn.com/v1/files/0iq0gb9ppip8-UA/image;s=1000x700",alt:e.title,width:"290px"}),(0,v.jsx)("p",{className:l.film_title,children:"".concat(e.title," (").concat(e.release_date.slice(0,4),")")})]},e.id)}))})]})}},861:function(e,t,r){function n(e,t,r,n,a,i,c){try{var s=e[i](c),o=s.value}catch(u){return void r(u)}s.done?t(o):Promise.resolve(o).then(n,a)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(a,i){var c=e.apply(t,r);function s(e){n(c,a,i,s,o,"next",e)}function o(e){n(c,a,i,s,o,"throw",e)}s(void 0)}))}}r.d(t,{Z:function(){return a}})}}]);
//# sourceMappingURL=821.d3cf6240.chunk.js.map